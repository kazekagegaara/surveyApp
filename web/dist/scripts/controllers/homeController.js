!function(){"use strict";angular.module("surveyApp").controller("homeController",["$scope","$location","serviceCall",function(e,r,t){e.title="Home",e.controllerInit=function(){if(localStorage.surveyAppPin)if(localStorage.surveyAppServerSettings){$("#startSurvey").removeClass("disabled");var r=localStorage.surveyAppPin,o='{"userPIN":'+r+"}",n=new t("getSurveyID","GET");n.call(o,e.surveyIDsuccess,e.serviceError,"json/getSurveyID.json")}else e.surveyMessage="You don't have your server settings setup.";else e.surveyMessage=localStorage.surveyAppServerSettings?"You don't have your PIN setup.":"You don't have your PIN and server settings setup."},e.surveyIDsuccess=function(r){var t=new Date;angular.forEach(r,function(e){angular.forEach(e,function(e,r){var o=new Date(e.nextDueAt);0===r?t=o:t>o&&(t=o)})}),console.log(t),e.surveyMessage=t.yyyymmdd()==(new Date).yyyymmdd()?"You have no surveys due. Please check in again later.":"You have a survey due at "+t+". To begin survey, please click on the Start Survey button."},e.serviceError=function(e){console.log(e),alert("Error! Please try again later.")},e.changePage=function(e){r.path(e)},Date.prototype.yyyymmdd=function(){var e=this.getFullYear().toString(),r=(this.getMonth()+1).toString(),t=this.getDate().toString();return e+"-"+(r[1]?r:"0"+r[0])+"-"+(t[1]?t:"0"+t[0])},e.controllerInit()}])}();